jQuery(document).ready(function(){function k(){f.hasClass("kmspc-step-by-step")&&(e.filter(":not(.active,:first)").addClass("disabled"),g.each(function(a,c){this.value&&""!=this.value&&e.filter('[data-target=".kmspc-'+this.id+'"]').nextAll(".kmspc-menu-item:first").removeClass("disabled")}))}function m(a){$variation=jQuery(a);fancyProductDesigner&&$variation.data("parameters")&&"object"===typeof $variation.data("parameters")&&$variation.data("image")&&fancyProductDesigner.addElement("image",$variation.data("image"), $variation.find(".kmspc-attribute-title").text(),$variation.data("parameters"))}var f=jQuery(".kmspc-wrapper"),e=f.find(".kmspc-menu-item"),l=f.find(".kmspc-content"),h=jQuery(".kmspc-variation"),n=jQuery(".variations_form"),g=n.find(".variations select"),b=[];jQuery(".kmspc-clear-selection").click(function(a){h.removeClass("active").show().find('input[type="radio"]').prop("checked",!1);n.find(".reset_variations").click();e.removeClass("active").first().removeClass("disabled").click().addClass("active"); k();a.preventDefault()});jQuery(".fpd-container").on("productCreate",function(){if(-1==document.URL.search("cart_item_key"))for(var a=0;a<b.length;++a)m(b[a]);b="fpd-ready"});h.click(function(){var a=jQuery(this);a.parents(".kmspc-variations").find(".kmspc-variation").removeClass("active");a.addClass("active").find('input[type="radio"]').prop("checked",!0).change();"fpd-ready"===b&&m(a)});g.each(function(a,c){var d=jQuery('input[name="'+this.id+'"]').filter('[value="'+jQuery(this).val()+'"]').parents(".kmspc-variation"); d.size()&&b.push(d);if(a==g.size()-1)for(d=0;d<b.length;d++)b[d].click()});l.find('input[type="radio"]').change(function(){var a=jQuery(".kmspc-variations").index(jQuery(this).parents(".kmspc-variations"));$selectBox=g.eq(a);$selectBox.focusin().val(this.value).change();k();f.hasClass("kmspc-auto-next")&&jQuery(".kmspc-menu-item.active").nextAll(".kmspc-menu-item:first").click()});e.click(function(a){var c=jQuery(this),d=c.data("target").replace(".kmspc-",""),b=jQuery("select#"+d+"").focusin();if(c.hasClass("disabled"))return!1; 0<b.children("option.active,option.enabled").size()&&h.find('input[type="radio"]').filter('[name="'+d+'"]').parents(".kmspc-variation").hide();b.children("option.active,option.enabled").each(function(a,b){var c=jQuery(b).parent("select").attr("id");h.find('input[type="radio"]').filter('[name="'+c+'"]').filter('[value="'+b.value+'"]').parents(".kmspc-variation:first").show()});0<f.find(".kmspc-accordion").size()?c.hasClass("active")||(e.children(".icon").removeClass("minus").addClass("add"),c.children(".icon").removeClass("add").addClass("minus"), l.slideUp(300),c.next(".kmspc-content:first").delay(300).slideDown(300)):(l.find(".kmspc-variations").hide(),jQuery(c.data("target")).show());e.removeClass("active");c.addClass("active");a.preventDefault()});setTimeout(function(){e.first().click()},1);e.first().click().addClass("active");k()});