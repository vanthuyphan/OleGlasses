jQuery(document).ready(function(a){"use strict";function c(){a("#ywcp_components_list_container_items.sortable").sortable({axis:"y",update:function(a,b){}}),a(document).on("click",".ywcp_components_list_container .ywcp_expand_all",function(){return a(this).closest(".ywcp_list_container").find(".ywcp_list_container_single_item").removeClass("closed").addClass("open"),!1}),a(document).on("click",".ywcp_components_list_container .ywcp_close_all",function(){return a(this).closest(".ywcp_list_container").find(".ywcp_list_container_single_item").removeClass("open").addClass("closed"),!1})}function d(){a("#ywcp_dependencies_list_container_items.sortable").sortable({axis:"y",update:function(a,b){}}),a(document).on("click",".ywcp_dependencies_list_container .ywcp_expand_all",function(){return a(this).closest(".ywcp_list_container").find(".ywcp_dependencieslist_container_single_item").removeClass("closed").addClass("open"),!1}),a(document).on("click",".ywcp_dependencies_list_container .ywcp_close_all",function(){return a(this).closest(".ywcp_list_container").find(".ywcp_dependencieslist_container_single_item").removeClass("open").addClass("closed"),!1})}function e(a){a.find(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}function f(){a(":input.wc-product-search").filter(":not(.enhanced)").each(function(){var b={allowClear:!!a(this).data("allow_clear"),placeholder:a(this).data("placeholder"),minimumInputLength:a(this).data("minimum_input_length")?a(this).data("minimum_input_length"):"3",escapeMarkup:function(a){return a},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",quietMillis:250,data:function(b){return{term:b,action:a(this).data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce,exclude:a(this).data("exclude"),include:a(this).data("include"),limit:a(this).data("limit")}},results:function(b){var c=[];return b&&a.each(b,function(a,b){c.push({id:a,text:b})}),{results:c}},cache:!0}};a(this).data("multiple")===!0?(b.multiple=!0,b.initSelection=function(b,c){var d=a.parseJSON(b.attr("data-selected")),e=[];return a(b.val().split(",")).each(function(a,b){e.push({id:b,text:d[b]})}),c(e)},b.formatSelection=function(a){return'<div class="selected-option" data-id="'+a.id+'">'+a.text+"</div>"}):(b.multiple=!1,b.initSelection=function(a,b){var c={id:a.val(),text:a.attr("data-selected")};return b(c)}),b=a.extend(b,l()),a(this).select2(b).addClass("enhanced")})}function g(){a("body").on("change","select.ywcp-product-search",function(){var b=a(this).val(),c=a(this).closest(".ywcp_components_list_container_single_item_form");c.find(".ywcp_layout_options_container").hide(),"product"===b?c.find(".ywcp-product-search-container").show():"product_categories"===b?c.find(".ywcp-categories-search-container").show():"product_tags"===b&&c.find(".ywcp-tags-search-container").show()}),a("select.ywcp-product-search").change()}function h(){a("body").on("change","select.ywcp-dependecies-selection-option, select.ywcp-dependecies-do-option",function(){var b=a(this).val(),c=a(this).closest(".ywcp_dependencieslist_component_single_item"),d=c.find(".ywcp_dependencieslist_component_single_item_products_chosen");"selection_is"===b||"selection_is_not"===b?d.show():d.hide()}),a("select.ywcp-dependecies-selection-option, select.ywcp-dependecies-do-option").change()}function i(){a("body").on("change","select.ywcp-dependecies-action-option",function(){var b=a(this).val(),c=a(this).closest(".ywcp_dependencieslist_component_single_item"),d=c.find(".ywcp_dependecies_action_container"),e=c.find(".ywcp_dependecies_condition_container");"do"===b?(d.show(),d.find("select").change(),e.hide()):"if"===b&&(d.hide(),e.show(),e.find("select").change())}),a("select.ywcp-dependecies-action-option").change()}function j(b){var c=a.extend({placeholder:a(this).data("placeholder"),width:"50%"},l());"undefined"==typeof b?a(".categories_id-select2, .product_id-select2").select2(c):b.select2(c)}function k(b){var c=a.extend({placeholder:a(this).data("placeholder"),width:"50%",maximumSelectionLength:1,maximumSelectionSize:1},l());"undefined"==typeof b?a(".ywcp_dependence_selection_product_id-select2").select2(c):b.select2(c)}function l(){var a={formatMatches:function(a){return 1===a?wc_enhanced_select_params.i18n_matches_1:wc_enhanced_select_params.i18n_matches_n.replace("%qty%",a)},formatNoMatches:function(){return wc_enhanced_select_params.i18n_no_matches},formatAjaxError:function(){return wc_enhanced_select_params.i18n_ajax_error},formatInputTooShort:function(a,b){var c=b-a.length;return 1===c?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",c)},formatInputTooLong:function(a,b){var c=a.length-b;return 1===c?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",c)},formatSelectionTooBig:function(a){return 1===a?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",a)},formatLoadMore:function(){return wc_enhanced_select_params.i18n_load_more},formatSearching:function(){return wc_enhanced_select_params.i18n_searching}};return a}function m(){var a,b,c;for(a="",c=0;c<32;c++)8!=c&&12!=c&&16!=c&&20!=c||(a+="-"),b=Math.floor(16*Math.random()).toString(16).toUpperCase(),a+=b;return a}function n(){var d={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_load_components"},h=a("#ywcp_components_list_container_items");a("#ywcp_tab_component").block(b),a.post(woocommerce_admin_meta_boxes.ajax_url,d,function(b){h.html(b),c(),e(h),g(),f(),j(h.find(".categories_id-select2")),h.trigger("ywcp_woocommerce_components_loaded"),a("#ywcp_tab_component").unblock()})}function o(){var c={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_load_dependencies"},e=a("#ywcp_dependencies_list_container_items");a("#ywcp_tab_dependecies").block(b),a.post(woocommerce_admin_meta_boxes.ajax_url,c,function(b){e.html(b),d(),k(e.find(".ywcp_dependence_selection_product_id-select2")),h(),i(),e.trigger("ywcp_woocommerce_dependencies_loaded"),a("#ywcp_tab_dependecies").unblock()})}var b={};b={message:null,overlayCSS:{background:"#fff",opacity:.6}},a("body").on("woocommerce-product-type-change",function(b,c,d){"yith-composite"===c&&(a("input#_downloadable").prop("checked",!1),a("input#_virtual").removeAttr("checked"),a(".show_if_simple").not("._sold_individually_field").show(),a(".show_if_external").hide(),a("input#_downloadable").closest(".show_if_simple").hide(),a("input#_virtual").closest(".show_if_simple").hide(),a(".wc-tabs > li.general_options.general_tab").show(),a(".pricing").show(),a("ul.product_data_tabs li:visible").eq(0).find("a").click(),a("input#_manage_stock").change(),a("li.inventory_tab").show(),a("input#_ywcp_options_product_per_item_shipping").change(),a("input#_ywcp_options_product_per_item_pricing").change())}),a("input#_ywcp_options_product_per_item_shipping").change(function(){"yith-composite"===a("select#product-type").val()&&(a("input#_ywcp_options_product_per_item_shipping").is(":checked")?(a(".show_if_virtual").show(),a(".hide_if_virtual").hide(),a(".shipping_tab").hasClass("active")&&a("ul.product_data_tabs li:visible").eq(0).find("a").click()):(a(".show_if_virtual").hide(),a(".hide_if_virtual").show()))}).change(),a(".ywcp_save_components").on("click",function(){var c={post_id:woocommerce_admin_meta_boxes.post_id,data:a("#ywcp_tab_component").find("input, select, textarea").serialize(),action:"ywcp_components_save"};a("#ywcp_tab_component").block(b),a.post(woocommerce_admin_meta_boxes.ajax_url,c,function(b){var c=window.location.toString();c=c.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),a("body").trigger("ywcp_woocommerce_components_saved"),a.get(c,function(b){a("#ywcp_tab_component").unblock()})},"json")}),a("body").on("ywcp_woocommerce_components_saved",function(){n(),a(".ywcp_save_dependencies").trigger("click")}),a(".ywcp_save_dependencies").on("click",function(){var c={post_id:woocommerce_admin_meta_boxes.post_id,data:a("#ywcp_tab_dependecies").find("input, select, textarea").serialize(),action:"ywcp_dependencies_save"};a("#ywcp_tab_dependecies").block(b),a.post(woocommerce_admin_meta_boxes.ajax_url,c,function(b){var c=window.location.toString();c=c.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),a("body").trigger("ywcp_woocommerce_dependencies_saved"),a.get(c,function(b){a("#ywcp_tab_dependecies").unblock()})},"json")}),a("body").on("ywcp_woocommerce_dependencies_saved",function(){o()}),a("body").on("click","button.ywcp_add_component",function(){a("#ywcp_tab_component").block(b);var d={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_add_component",ywcp_component_index:m()},h=a("#ywcp_components_list_container_items");return a.post(woocommerce_admin_meta_boxes.ajax_url,d,function(b){h.append(b);var d=a("#ywcp_components_list_container_items .ywcp_components_list_container_single_item").last();c(),e(d),g(),f(),j(d.find(".categories_id-select2")),d.trigger("ywcp_woocommerce_component_added"),a("#ywcp_tab_component").unblock()}),!1}),a("body").on("click","button.ywcp_add_dependencies",function(){a("#ywcp_tab_dependecies").block(b);var c={post_id:woocommerce_admin_meta_boxes.post_id,action:"ywcp_ajax_add_dependence",ywcp_dependence_index:m()},d=a("#ywcp_dependencies_list_container_items");return a.post(woocommerce_admin_meta_boxes.ajax_url,c,function(b){d.append(b);var c=a("#ywcp_dependencies_list_container_items .ywcp_dependencieslist_container_single_item").last();k(c.find(".ywcp_dependence_selection_product_id-select2")),h(),i(),c.trigger("ywcp_woocommerce_dependencies_added"),a("#ywcp_tab_dependecies").unblock()}),!1}),a("body").on("click","button.ywcp_remove_component",function(){var b=a(this).parent().parent();b.find("*").off(),b.remove()}),a("body").on("click","button.ywcp_remove_dependence",function(){var b=a(this).parent().parent();b.find("*").off(),b.remove()}),c(),d(),g(),h(),i(),f(),j(),k()});