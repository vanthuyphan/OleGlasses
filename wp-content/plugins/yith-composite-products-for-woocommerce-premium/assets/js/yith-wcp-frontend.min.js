jQuery(document).ready(function(a){"use strict";function f(){K(),C(),m(),w(),y(),a(document).on("click",".ywcp_component_options_list_container .woocommerce-pagination ul.page-numbers > li",function(){var b=a(this).find("a.page-numbers");if(b.length>0){var c=a(this).closest(".ywcp_components_container").data("product-id"),d=a(this).closest(".ywcp_components_single_item").data("component-key"),e=a(this).closest(".ywcp_component_options_list_container");g(e);var f=a(this).closest(".woocommerce-pagination").find("span.page-numbers.current").html();if(b.hasClass("prev"))var i=parseInt(f)-1;else if(b.hasClass("next"))var i=parseInt(f)+1;else var i=b.html();i>0&&a.ajax({url:yith_wcp_general.wc_ajax_url.toString().replace("%%endpoint%%","ywcp_component_items_page_changed"),type:"POST",data:{product_id:c,ywcp_current_page:i,key:d},beforeSend:function(){},success:function(b){e.html(b),a(document).trigger("ywcp_component_item_page_loaded",e),h(e)}})}return!1}),a(document).on("ywcp_component_item_page_loaded",function(a,b){u(b),C()}),a(document).on("click",".ywcp_accordion div:not(.ywcp_selection_selected).ywcp_components_single_item > h3",function(){var b=a(this).closest(".ywcp_components_single_item");if(b.hasClass("ywcp_selection_opened")){var c=b.find(".ywcp_selection_close");c.length>0&&c.trigger("click")}else{var d=b.find(".ywcp_selection_open");d.length>0&&d.trigger("click")}return!1}),a(document).on("click",".ywcp_selection_open",function(){var b=a(this).closest(".ywcp_components_single_item");return b.addClass("ywcp_selection_opened"),b.trigger("ywcp_component_selection_opened"),!1}),a(document).on("click",".ywcp_selection_close",function(){var b=a(this).closest(".ywcp_components_single_item");return b.removeClass("ywcp_selection_opened"),b.trigger("ywcp_component_selection_closed"),!1}),a(document).on("click",".ywcp_selection_clear",function(){var b=a(this).closest(".ywcp_components_single_item");i(b);var c=b.find(".ywcp_selection_open");return c.length>0&&c.trigger("click"),b.trigger("ywcp_component_selection_cleared"),!1}),a(document).on("change",'.ywcp_component_otpions_select, .ywcp_component_options_radio_input_container input[type="radio"]',function(){return a(this).trigger("ywcp_component_do_selection",a(this)),!1}),a(document).on("click",".ywcp_component_otpions_thumbnails_container ul.products li",function(){return a(this).trigger("ywcp_component_do_selection",a(this)),!1}),a(document).on("ywcp_component_do_selection",function(b,c){var d=a(c),e=d.closest(".ywcp_components_single_item");g(e);var f=0;d.val()>0?f=d.val():d.data("product-id")>0&&(f=d.data("product-id")),f>0?l(f,e,!0,!0,!0):(j(e),h(e))}),a(document).on("ywcp_component_item_selected_loaded ywcp_component_selection_cleared",function(b,c){var d=a(c);m(),r(d),C(),w()}),a(document).on("found_variation",function(b,c){var d=a(b.target);d.data("selected-price",c.display_price),d.attr("data-selected-price",c.display_price),C(),m(),w()}),a(document).on("hide_variation",function(b){var c=a(b.target);console.log(c);var d=c.closest(".ywcp_inner_selected_container");d.data("selected-price",0),d.attr("data-selected-price",0),C(),m(),w()}),a(document).on("change","form.cart.ywcp > div.quantity input.qty, .ywcp_inner_selected_container div.quantity input.qty",function(a){w()}),a(document).on("ywcp_calculate_total",function(a){w()}),a(document).on("click",".ywcp_step_prev",function(){if(d>0){var b=a(".ywcp_components_container.ywcp_step"),c=b.find(".ywcp_components_single_item"),e=d-1;if(e>=0){var f=c.eq(e),g=o(f,!0);g||(d-=1,y())}}return!1}),a(document).on("click",".ywcp_step_next",function(){if(d>0){var b=a(".ywcp_components_container.ywcp_step"),c=b.find(".ywcp_components_single_item"),e=d-1;if(e>=0){var f=c.eq(e),g=o(f,!0);g||(d+=1,y())}}return!1}),a(".ywcp_form_loading_message").hide(),a("form.cart.ywcp").addClass("ywcp_form_loaded")}function g(a){a.block({message:"",overlayCSS:{backgroundColor:"#fff",opacity:.6,cursor:"wait"}})}function h(a){a.unblock()}function i(a){j(a),k(a)}function j(a){a.removeClass("ywcp_selection_selected");var b=a.find(".ywcp_component_options_selection_container");t(a,b.data("selected-id")),b.data("selected-id",""),b.removeAttr("data-selected-id"),b.html("");var c=a.find(".ywcp_component_subtotal"),d=c.find("span.amount");c.hide(),d.html("")}function k(a){var b=a.find(".ywcp_component_otpions_select");"undefined"!=typeof b&&b.val("-1");var c=a.find(".ywcp_component_options_radio_container input.ywcp_radio_default_value");"undefined"!=typeof c&&c.attr("checked",!0)}function l(b,c,d,e,f){if(!c.hasClass("ywcp_selection_selected")){var g=c.data("component-key"),i=c.closest(".ywcp_components_container").data("product-id");c.removeClass("ywcp_selection_opened"),c.removeClass("ywcp_components_required_blocked"),c.addClass("ywcp_selection_selected"),a.ajax({url:yith_wcp_general.wc_ajax_url.toString().replace("%%endpoint%%","ywcp_component_items_selected"),type:"POST",dataType:"json",data:{master_id:i,product_id:b,key:g},beforeSend:function(){},success:function(e){var g=c.find(".ywcp_component_options_selection_container");g.html(e.html),g.data("selected-id",b),g.attr("data-selected-id",b);var i=g.find(".ywcp_inner_selected_container"),j=i.find(".variations select");j.length>0&&(i.wc_variation_form(),j.change()),d?a(document).trigger("ywcp_component_item_selected_loaded",c):(m(),r(c),w()),"undefined"!=typeof a.yith_wccl&&e.attr_wccl&&a.yith_wccl(e.attr_wccl),f&&h(c)}})}}function m(){var b=a(".ywcp_components_container"),c=!1;b.find(".ywcp_components_single_item.ywcp_components_required").each(function(){if(c=o(a(this),!0))return!1});var d=b.closest("form.cart").find("button.single_add_to_cart_button");c?d.attr("disabled","disabled"):d.removeAttr("disabled");var e=a("a.add-request-quote-button");e.length>0&&(c?(e.attr("href","javascript:void()"),e.addClass("disabled")):(e.attr("href","#"),e.removeClass("disabled"))),n(),a(document).trigger("ywcp_component_add_to_cart_changed",d)}function n(){var b=a(".ywcp_components_required_blocked"),c=a(".ywcp_customer_advice");if(b.length>0){var d=c.find(".ywcp_customer_advice_component_list");d.html("");var e="";b.each(function(){e+=a(this).data("title")}),d.html(e),c.show()}else c.hide()}function o(a,b){if(a.hasClass("ywcp_components_required")){var c=a.data("required"),d=p(a)>0;if(c&&!d)return b&&a.addClass("ywcp_components_required_blocked"),!0;a.removeClass("ywcp_components_required_blocked")}return!1}function p(a){var b=!1,c=a.find(".ywcp_component_options_selection_container");if("undefined"!=typeof c){var d=parseInt(c.data("selected-id"));if(b=d>0){var e=c.find(".ywcp_inner_selected_container").data("product-type");if("variable"==e){var f=parseInt(c.find(".variation_id").val());return f>0?f:0}return d}}return 0}function q(a){var c=a.find(".ywcp_component_options_selection_container");if("undefined"!=typeof c){var d=parseInt(c.data("selected-id"));if(d>0)return d}return 0}function r(c){if(c.data("exclusive")){var d=c.find(".ywcp_component_options_selection_container");if("undefined"!=typeof d){var e=parseInt(d.data("selected-id"));if(e>0){var f=c.data("component-key");b[f]=e;var g=a(".ywcp_components_container");g.find(".ywcp_components_single_item").each(function(){var b=a(this),c=b.data("component-key");if(c!=f){var d=b.closest(".ywcp_components_single_item");if("undefined"!=typeof d){s(d,e);var g=b.find(".ywcp_component_options_selection_container");if("undefined"!=typeof g){var h=g.data("selected-id");if(h==e){var i=d.find(".ywcp_selection_clear");i.click();var j=d.find(".ywcp_selection_close");j.length>0&&j.click()}}}}})}}}}function s(a,b){var c=a.find(".ywcp_product_"+b);c.addClass("ywcp_product_disabled"),c.attr("disabled","disabled")}function t(c,d){if(c.data("exclusive")&&d>0){var e=c.data("component-key"),f=a(".ywcp_components_container");b[e]=0,f.find(".ywcp_components_single_item").each(function(){var b=a(this),c=b.data("component-key");if(c!=e){var f=b.closest(".ywcp_components_single_item");"undefined"!=typeof f&&v(f,d)}})}}function u(c){var d=a(c);for(var e in b)s(d,b[e])}function v(a,b){var c=a.find(".ywcp_product_"+b);c.removeClass("ywcp_product_disabled"),c.removeAttr("disabled")}function w(){var b=a(".ywcp_components_container"),c=parseFloat(a("form.cart.ywcp > div.quantity input.qty").val()),d=parseFloat(a(".ywcp_wcp_group_total").data("product-price"))*c,e=a(".yith_wcp_group_option_total_base_price span.amount");if(e.html(L(d)),b.length>0){var f=d,g=x(b,c);f+=g;var h=a(".yith_wcp_component_total span.amount"),i=a("#ywcp_wcp_tr_component_total");g>0?(i.show(),h.html(L(g))):(i.hide(),h.html(""));var j=a(".yith_wcp_group_final_total span.amount"),k=a("#ywcp_wcp_tr_order_total");f>0?(k.show(),j.html(L(f))):(k.hide(),j.html(""))}}function x(b,c){var d=0;return b.find(".ywcp_components_single_item").each(function(){var b=a(this),e=b.find(".ywcp_component_subtotal"),f=e.find("span.amount"),g=b.data("sold-individually"),h=b.find(".ywcp_component_options_selection_container");if("undefined"!=typeof h){var i=parseInt(h.data("selected-id"));if(i>0){var j=h.find(".ywcp_inner_selected_container"),k=parseFloat(j.data("selected-price")),l=parseFloat(j.find("input.qty").val()),m=k*l;g||(m*=c),f.html(L(m)),e.show(),d+=m}}}),d}function y(){var b=a(".ywcp_components_container.ywcp_step");if(b.length>0){var c=b.data("layout-option");if("step"==c){var e=b.find(".ywcp_components_single_item"),f=a(".ywcp_step_navigation");if(e.length>0){e.removeClass("ywcp_current_step_item"),f.removeClass("ywcp_step_first"),f.removeClass("ywcp_step_last");var g=d-1;if(g>=0){var h=e.eq(g);h.addClass("ywcp_current_step_item"),1==d?f.addClass("ywcp_step_first"):e.length==d&&f.addClass("ywcp_step_last")}A(e)}}}}function A(b){var c=a(".ywcp_step_current_info");c.length>0&&c.html(d.toString()+"/"+b.length.toString())}function B(){var b=a(".ywcp_components_container"),c=b.data("dependencies"),d=[];for(var e in c)if(c.hasOwnProperty(e)){var f=e.split("_")[0];d[f]=[]}for(var e in c)if(c.hasOwnProperty(e)){var f=e.split("_")[0],g=e.split("_")[1];d[f][g]=c[e]}return d}function C(){for(var a in e){var b=!0;if(e.hasOwnProperty(a))for(var c in e[a])if(b=D(a,c,e[a][c]),!b){H(a),I(a),J(a);break}}}function D(a,b,c){switch(c.action_type){case"do":return G(a,b,c),!0;case"if":return E(b,c)}return!1}function E(b,c){var d=!0,e=a("#ywcp_component_"+b.toString());if(e.length>0){var f=p(e);switch(c.selection_type){case"not_selected":d=0===f;break;case"is_selected":d=f>0;break;case"selection_is":d=F(f,e,c,0);break;case"selection_is_not":d=F(f,e,c,-1)}}return d}function F(b,c,d,e){if(b>0){var f=q(c);return b!=f?a.inArray(f.toString(),d.option_ids)===e||a.inArray(b.toString(),d.option_ids)===e:a.inArray(b.toString(),d.option_ids)===e}return!1}function G(b,d,e){var f=a("#ywcp_component_"+d.toString());switch(e.do_type){case"hided":f.addClass("ywcp_components_single_item_depenence_"+b),f.addClass("ywcp_components_single_item_depenence_hided"),i(f);break;case"selection_is":e.option_ids.length>0&&(f.addClass("ywcp_components_single_item_dependence_selected_"+b),f.addClass("ywcp_components_single_item_dependence_selected"),l(e.option_ids[0],f,!1,!1,!1));break;case"selection_is_not":if("undefined"==typeof c[b]&&(c[b]=[]),c[b][d]=e.option_ids,e.option_ids.length>0)for(var g=p(f),h=0;h<e.option_ids.length;h++)g==e.option_ids[h]&&i(f),s(f,e.option_ids[h])}}function H(b){var c=a(".ywcp_components_single_item_depenence_"+b);c.length>0&&(c.removeClass("ywcp_components_single_item_depenence_hided"),c.removeClass(".ywcp_components_single_item_depenence_"+b))}function I(b){var c="ywcp_components_single_item_dependence_selected_"+b,d=a("."+c);d.length>0&&d.each(function(){i(a(this)),a(this).removeClass(c),a(this).removeClass("ywcp_components_single_item_dependence_selected")})}function J(b){if("undefined"!=typeof c[b]){var d=c[b];for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];if("undefined"!=typeof f){for(var g=a("#ywcp_component_"+e.toString()),h=0;h<f.length;h++)v(g,f[h]);d[e]=[]}}}}function K(){var b=a(".ywcp_components_container");b.find(".ywcp_components_single_item").each(function(){var b=a(this).data("component-key"),c=a(".ywcp_edit_cart_item_variation_"+b.toString()),d=a(".ywcp_edit_cart_item_parent_"+b.toString());c.length>0&&""!=c.val()?l(c.val(),a(this),!1,!1,!1):d.length>0&&l(d.val(),a(this),!1,!1,!1)})}function L(a){var b=a;return"undefined"!=typeof accounting&&(b=accounting.formatMoney(a,{symbol:yith_wcp_general.currency_format_symbol,decimal:yith_wcp_general.currency_format_decimal_sep,thousand:yith_wcp_general.currency_format_thousand_sep,precision:yith_wcp_general.currency_format_num_decimals,format:yith_wcp_general.currency_format})),b}if("undefined"==typeof yith_wcp_general)return!1;var b=new Array,c=new Array,d=1,e=B();f(),a(document).on("qv_loader_stop yit_quick_view_loaded",function(){f()})});